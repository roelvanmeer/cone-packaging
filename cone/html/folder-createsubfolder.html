<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/loose.dtd">
<HTML
><HEAD
><link rel='stylesheet' type='text/css' href='manpage.css'>
<!-- $Id: book.sgml,v 1.3 2004/05/30 02:43:00 mrsam Exp $ -->
<!-- Copyright 2002-2003 Double Precision, Inc.  See COPYING for -->
<!-- distribution information. -->
<meta name="MSSmartTagsPreventParsing" content="TRUE">
<link rel="icon" href="icon.gif" type="image/gif" />
<TITLE
>mail::folder::createSubFolder</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.79"><LINK
REL="HOME"
HREF="book.html"><LINK
REL="UP"
TITLE="mail::folder Native API reference"
HREF="libmail-folder.html"><LINK
REL="PREVIOUS"
TITLE="mail::folder::create"
HREF="folder-create.html"><LINK
REL="NEXT"
TITLE="mail::folder::delRights"
HREF="folder-delrights.html"></HEAD
><BODY
CLASS="REFENTRY"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
></TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="folder-create.html"
ACCESSKEY="P"
>&#60;&#60;&#60; Previous</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
></TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="folder-delrights.html"
ACCESSKEY="N"
>Next &#62;&#62;&#62;</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><H1
><A
NAME="FOLDER-CREATESUBFOLDER"
></A
>mail::folder::createSubFolder</H1
><DIV
CLASS="REFNAMEDIV"
><A
NAME="AEN9422"
></A
><H2
>Name</H2
>mail::folder::createSubFolder&nbsp;--&nbsp;Create a new folder</DIV
><DIV
CLASS="REFSYNOPSISDIV"
><A
NAME="AEN9425"
></A
><H2
>Synopsis</H2
><P
CLASS="LITERALLAYOUT"
>#include&nbsp;&#60;libmail/mail.H&#62;<br>
<br>
<br>
class&nbsp;myCallback&nbsp;:&nbsp;public&nbsp;mail::callback&nbsp;{<br>
public:<br>
&nbsp;&nbsp;&nbsp;&nbsp;void&nbsp;success(std::string&nbsp;msg);<br>
&nbsp;&nbsp;&nbsp;&nbsp;void&nbsp;fail(std::string&nbsp;msg);<br>
};</P
><P
CLASS="LITERALLAYOUT"
>class&nbsp;myFolderCallback&nbsp;:&nbsp;public&nbsp;mail::callback::folderlist&nbsp;{<br>
public:<br>
&nbsp;&nbsp;&nbsp;&nbsp;void&nbsp;success(const&nbsp;std::vector&#60;const&nbsp;mail::folder&nbsp;*&#62;&nbsp;&#38;folders);<br>
};</P
><P
CLASS="LITERALLAYOUT"
>mail::folder&nbsp;*folder;</P
><DIV
CLASS="FUNCSYNOPSIS"
><P
></P
><A
NAME="AEN9429"
></A
><P
><CODE
><CODE
CLASS="FUNCDEF"
>folder-&#62;<TT
CLASS="FUNCTION"
>createSubFolder</TT
></CODE
>(std::string <TT
CLASS="PARAMETER"
><I
>name</I
></TT
>, bool <TT
CLASS="PARAMETER"
><I
>createDirectory</I
></TT
>, myFolderCallback &#38;<TT
CLASS="PARAMETER"
><I
>folderCallback</I
></TT
>, myCallback &#38;<TT
CLASS="PARAMETER"
><I
>callback</I
></TT
>);</CODE
></P
><P
></P
></DIV
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="AEN9441"
></A
><H2
>USAGE</H2
><P
>Most mail accounts support the ability to create and delete folders, which
are arranged in a tree-like hierarchy.
<TT
CLASS="FUNCTION"
>mail::folder::createSubFolder</TT
> creates a new folder,
as a subfolder of
<TT
CLASS="PARAMETER"
><I
>folder</I
></TT
> (which does not necessarily have to
refer the currently open
folder; it may be any
<CODE
CLASS="STRUCTNAME"
>mail::folder</CODE
> object that's associated with an
active <CODE
CLASS="STRUCTNAME"
>mail::account</CODE
>).</P
><P
>Folders may be created in IMAP accounts, and local mail (either mbox or
maildir) accounts.
Folders cannot be created in POP3 accounts, as this functionality is not
supported by the POP3 protocol (this operation will fail).</P
><P
>There are two types of folders: folder that contain messages
(regular folders), and folders
that contain other sub-folders ("folder directories", or
"directories" for short).
<TT
CLASS="PARAMETER"
><I
>isDirectory</I
></TT
> specifies whether the new folder is
a regular folder, or a folder directory.</P
><DIV
CLASS="NOTE"
><P
></P
><TABLE
CLASS="NOTE"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
>NOTE:</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>Local maildir-based accounts, and some IMAP servers, are capable of
supporting so-called "dual-purpose" folders; folders that contain both
messages and other sub-folders.
A dual-purpose folder may be created by invoking
<TT
CLASS="FUNCTION"
>mail::folder::createSubFolder</TT
> twice, once with
<TT
CLASS="PARAMETER"
><I
>isDirectory</I
></TT
> set to <TT
CLASS="LITERAL"
>false</TT
>; and a
second time with
<TT
CLASS="PARAMETER"
><I
>isDirectory</I
></TT
> set to <TT
CLASS="LITERAL"
>true</TT
>, specifying
the same <TT
CLASS="PARAMETER"
><I
>name</I
></TT
> both times.</P
></TD
></TR
></TABLE
></DIV
><P
><TT
CLASS="PARAMETER"
><I
>name</I
></TT
> specifies the name of the new folder, in the
application's character set.</P
><DIV
CLASS="NOTE"
><P
></P
><TABLE
CLASS="NOTE"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
>NOTE:</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>Some mail servers reserve certain characters which cannot be used in
folder names.
IMAP mail servers use a special character
(usually
"<TT
CLASS="LITERAL"
>/</TT
>" or
"<TT
CLASS="LITERAL"
>.</TT
>")
as a separator between names in
a hierarchical folder path.
The actual character varies from server to server.
An attempt to create/rename a folder
whose name includes a reserved character will fail.
Different IMAP servers use different hierarchy separator characters.
An attempt to create a folder may fail on one IMAP server even if another
IMAP server can succesfully create a folder with the same name.
This is, unfortunately, a design flaw in the IMAP protocol.</P
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="NOTE"
><P
></P
><TABLE
CLASS="NOTE"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
>NOTE:</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>Maildir folders created by
are compatible
and can be read by the
<A
HREF="http://www.courier-mta.org"
TARGET="_top"
>Courier-IMAP</A
>
server.
Names of maildir folders may contain any character, including
the characters
"<TT
CLASS="LITERAL"
>:</TT
>",
"<TT
CLASS="LITERAL"
>/</TT
>",
"<TT
CLASS="LITERAL"
>.</TT
>",
"<TT
CLASS="LITERAL"
>~</TT
>",
and
"<TT
CLASS="LITERAL"
>:</TT
>".
However, if the same folders are exported
via IMAP, folders whose name
includes these characters may not be readable by some IMAP clients.
Even a

<TT
CLASS="APPLICATION"
>LibMAIL</TT
>
 application may not be able to read
one of these folders via IMAP.</P
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="NOTE"
><P
></P
><TABLE
CLASS="NOTE"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
>NOTE:</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>Mbox mail folders created by

<TT
CLASS="APPLICATION"
>LibMAIL</TT
>

are mostly compatible
and can be exported by IMAP servers that read mbox-formatted mail folders
(with some limitations, such as that the same mbox folder cannot be
open by 
<TT
CLASS="APPLICATION"
>LibMAIL</TT
>
 and another application at the
same time).
Names of mbox folders can contain any character, including
the characters
"<TT
CLASS="LITERAL"
>/</TT
>",
and
"<TT
CLASS="LITERAL"
>~</TT
>".
However if mbox folders are exported
via IMAP, folders whose name includes
these characters may not be readable by some IMAP clients.</P
></TD
></TR
></TABLE
></DIV
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="AEN9480"
></A
><H2
>RETURN CODES AND CALLBACKS</H2
><P
>The application must wait until
<TT
CLASS="PARAMETER"
><I
>callback</I
></TT
>'s
<TT
CLASS="FUNCTION"
>success</TT
> or
<TT
CLASS="FUNCTION"
>fail</TT
> method is invoked.
The <TT
CLASS="FUNCTION"
>success</TT
> method is invoked when this request is
succesfully processed.
The <TT
CLASS="FUNCTION"
>fail</TT
> method is invoked if this request cannot
be processed.
The application must not destroy
<TT
CLASS="PARAMETER"
><I
>callback</I
></TT
> until either the
<TT
CLASS="FUNCTION"
>success</TT
> or
<TT
CLASS="FUNCTION"
>fail</TT
> method is invoked.</P
><DIV
CLASS="NOTE"
><P
></P
><TABLE
CLASS="NOTE"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
>NOTE:</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
><TT
CLASS="PARAMETER"
><I
>callback</I
></TT
>'s
<TT
CLASS="FUNCTION"
>fail</TT
> method may be invoked even after other
callback methods were invoked.
This indicates that the request was partially completed before the error
was encountered.</P
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="NOTE"
><P
></P
><TABLE
CLASS="NOTE"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
>NOTE:</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>The application must not destroy
<TT
CLASS="PARAMETER"
><I
>folderCallback</I
></TT
> until this request
fails or succeeds.
<TT
CLASS="PARAMETER"
><I
>folderCallback</I
></TT
>'s
<TT
CLASS="FUNCTION"
>success</TT
> method is invoked just before
the
<TT
CLASS="PARAMETER"
><I
>callback</I
></TT
>'s
<TT
CLASS="FUNCTION"
>success</TT
> method.</P
></TD
></TR
></TABLE
></DIV
><P
>If the folder was succesfully created,
the
<TT
CLASS="FUNCTION"
>folderCallback.success</TT
> method
receives a vector that contains a single pointer to a
<CODE
CLASS="STRUCTNAME"
>mail::folder</CODE
> object.
The
<CODE
CLASS="STRUCTNAME"
>mail::folder</CODE
> object will refer to the newly-created
folder.</P
><DIV
CLASS="NOTE"
><P
></P
><TABLE
CLASS="NOTE"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
>NOTE:</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
><CODE
CLASS="STRUCTNAME"
>mail::folder</CODE
>s are linked to their corresponding
<CODE
CLASS="STRUCTNAME"
>mail::account</CODE
>s.
A <CODE
CLASS="STRUCTNAME"
>mail::folder</CODE
> created by one
<CODE
CLASS="STRUCTNAME"
>mail::account</CODE
> may not be used with a different
<CODE
CLASS="STRUCTNAME"
>mail::folder</CODE
>.
All
<CODE
CLASS="STRUCTNAME"
>mail::folder</CODE
>s created by
a <CODE
CLASS="STRUCTNAME"
>mail::account</CODE
> are invalidated when
this <CODE
CLASS="STRUCTNAME"
>mail::account</CODE
> object is destroyed.
Note that the
<CODE
CLASS="STRUCTNAME"
>mail::folder</CODE
> objects are not automatically destroyed;
the application is still responsible for destroying any remaining
<CODE
CLASS="STRUCTNAME"
>mail::folder</CODE
>s, after their
a <CODE
CLASS="STRUCTNAME"
>mail::account</CODE
> is destroyed.</P
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="NOTE"
><P
></P
><TABLE
CLASS="NOTE"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
>NOTE:</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>The
<TT
CLASS="FUNCTION"
>folderCallback.success</TT
> method
receives a (possibly empty) vector of pointers to
<CODE
CLASS="STRUCTNAME"
>mail::folder</CODE
> objects.
These objects will be destroyed when
<TT
CLASS="FUNCTION"
>folderCallback.success</TT
> terminates.
The application must use
<A
HREF="folder-clone.html"
><SPAN
CLASS="CITEREFENTRY"
><SPAN
CLASS="REFENTRYTITLE"
>mail::folder::clone</SPAN
>(3x)</SPAN
></A
>
to create copies of
<CODE
CLASS="STRUCTNAME"
>mail::folder</CODE
> objects it wants to
use later.</P
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="NOTE"
><P
></P
><TABLE
CLASS="NOTE"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
>NOTE:</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>Both
<TT
CLASS="FUNCTION"
>folderCallback.success</TT
> and
<TT
CLASS="FUNCTION"
>myCallback.success</TT
> method will be invoked if this
request succeeds.
<TT
CLASS="FUNCTION"
>folderCallback.success</TT
> will be invoked before
<TT
CLASS="FUNCTION"
>myCallback.success</TT
> (since by definition this indicates
that the request has been completed).</P
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="NOTE"
><P
></P
><TABLE
CLASS="NOTE"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
>NOTE:</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>For some kinds of accounts,
<A
HREF="folder-readsubfolders.html"
><SPAN
CLASS="CITEREFENTRY"
><SPAN
CLASS="REFENTRYTITLE"
>mail::folder::readSubFolders</SPAN
>(3x)</SPAN
></A
>
may not enumerate new folder directories until they contain at least one
folder.
Therefore the recommended process to create a new folder directory is
as follows:</P
><P
></P
><UL
><LI
><P
>Invoke
<TT
CLASS="FUNCTION"
>mail::folder::createSubFolder</TT
> to request the creation
of a new folder directory.</P
></LI
><LI
><P
>In
<TT
CLASS="FUNCTION"
>folderCallback.success</TT
>, use
<A
HREF="folder-clone.html"
><SPAN
CLASS="CITEREFENTRY"
><SPAN
CLASS="REFENTRYTITLE"
>mail::folder::clone</SPAN
>(3x)</SPAN
></A
>
to save a copy of the
<CODE
CLASS="STRUCTNAME"
>mail::folder</CODE
> object which refers to the new
folder directory.</P
></LI
><LI
><P
>After the
<TT
CLASS="FUNCTION"
>myCallback.success</TT
> method is invoked, use the saved
<CODE
CLASS="STRUCTNAME"
>mail::folder</CODE
> object's
<TT
CLASS="FUNCTION"
>createSubFolder</TT
> method to create a new folder in the
new folder directory.</P
></LI
></UL
></TD
></TR
></TABLE
></DIV
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="AEN9558"
></A
><H2
>SEE ALSO</H2
><P
><A
HREF="folder-clone.html"
><SPAN
CLASS="CITEREFENTRY"
><SPAN
CLASS="REFENTRYTITLE"
>mail::folder::clone</SPAN
>(3x)</SPAN
></A
>,
<A
HREF="folder-create.html"
><SPAN
CLASS="CITEREFENTRY"
><SPAN
CLASS="REFENTRYTITLE"
>mail::folder::create</SPAN
>(3x)</SPAN
></A
>,
<A
HREF="folder-destroy.html"
><SPAN
CLASS="CITEREFENTRY"
><SPAN
CLASS="REFENTRYTITLE"
>mail::folder::destroy</SPAN
>(3x)</SPAN
></A
>,
<A
HREF="folder-readsubfolders.html"
><SPAN
CLASS="CITEREFENTRY"
><SPAN
CLASS="REFENTRYTITLE"
>mail::folder::readSubFolders</SPAN
>(3x)</SPAN
></A
>,
<A
HREF="folder-renamefolder.html"
><SPAN
CLASS="CITEREFENTRY"
><SPAN
CLASS="REFENTRYTITLE"
>mail::folder::renameFolder</SPAN
>(3x)</SPAN
></A
>.</P
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="folder-create.html"
ACCESSKEY="P"
>&#60;&#60;&#60; Previous</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="book.html"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="folder-delrights.html"
ACCESSKEY="N"
>Next &#62;&#62;&#62;</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>mail::folder::create</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="libmail-folder.html"
ACCESSKEY="U"
>Up</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>mail::folder::delRights</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>