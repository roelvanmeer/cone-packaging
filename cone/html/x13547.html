<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/loose.dtd">
<HTML
><HEAD
><link rel='stylesheet' type='text/css' href='manpage.css'>
<!-- $Id: book.sgml,v 1.3 2004/05/30 02:43:00 mrsam Exp $ -->
<!-- Copyright 2002-2003 Double Precision, Inc.  See COPYING for -->
<!-- distribution information. -->
<meta name="MSSmartTagsPreventParsing" content="TRUE">
<link rel="icon" href="icon.gif" type="image/gif" />
<TITLE
>Copying and moving messages</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.79"><LINK
REL="HOME"
HREF="book.html"><LINK
REL="UP"
TITLE="Simple Mail Access Protocol, Version 1"
HREF="smap1.html"><LINK
REL="PREVIOUS"
TITLE="Adding messages to folders"
HREF="add.html"><LINK
REL="NEXT"
TITLE="Searching messages"
HREF="search.html"></HEAD
><BODY
CLASS="SECTION"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
></TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="add.html"
ACCESSKEY="P"
>&#60;&#60;&#60; Previous</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
>Simple Mail Access Protocol, Version 1</TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="search.html"
ACCESSKEY="N"
>Next &#62;&#62;&#62;</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECTION"
><H1
CLASS="SECTION"
><A
NAME="AEN13547"
>Copying and moving messages</A
></H1
><P
><P
CLASS="LITERALLAYOUT"
>C:&nbsp;COPY&nbsp;3-5&nbsp;8&nbsp;""&nbsp;Folders&nbsp;"Sent&nbsp;Mail"<br>
S:&nbsp;*&nbsp;COPY&nbsp;3&nbsp;NEWUID=1043320248/3601<br>
S:&nbsp;*&nbsp;COPY&nbsp;4&nbsp;NEWUID=1043320248/3602<br>
S:&nbsp;*&nbsp;COPY&nbsp;5&nbsp;NEWUID=1043320248/3603<br>
S:&nbsp;*&nbsp;COPY&nbsp;8&nbsp;NEWUID=1043320248/3604<br>
S:&nbsp;+OK&nbsp;Messages&nbsp;copied</P
></P
><P
>The <TT
CLASS="LITERAL"
>COPY</TT
> command copies messages from the currently
open folder to another folder.
<TT
CLASS="LITERAL"
>COPY</TT
> is followed by whitespace-delimited words that
enumerate messages to be copied, an empty word, then whitespace-delimited
words that name the folder the messages are copied to.</P
><P
><SPAN
CLASS="QUOTE"
>"<TT
CLASS="REPLACEABLE"
><I
>m</I
></TT
>-<TT
CLASS="REPLACEABLE"
><I
>n</I
></TT
>"</SPAN
>
can be a shortcut designation for messages #m through #n, inclusive.
The message number list must be in a numerically-increasing order, with
no overlaps.</P
><P
>The server responds with one ore more <TT
CLASS="LITERAL"
>* COPY</TT
> single line
replies, one reply for each copied message.
The next word contains the message number of the copied message, followed
by a list of attributes.  At present time only one attribute is defined:
<SPAN
CLASS="QUOTE"
>"<TT
CLASS="LITERAL"
>UID=</TT
><TT
CLASS="LITERAL"
>id</TT
>"</SPAN
> gives the
assigned unique id of the saved message in the destination folder.</P
><P
><P
CLASS="LITERALLAYOUT"
>C:&nbsp;MOVE&nbsp;3-5&nbsp;8&nbsp;""&nbsp;Folders&nbsp;"Sent&nbsp;Mail"<br>
S:&nbsp;*&nbsp;COPY&nbsp;3&nbsp;NEWUID=1043320248/3601<br>
S:&nbsp;*&nbsp;COPY&nbsp;4&nbsp;NEWUID=1043320248/3602<br>
S:&nbsp;*&nbsp;COPY&nbsp;5&nbsp;NEWUID=1043320248/3603<br>
S:&nbsp;*&nbsp;COPY&nbsp;8&nbsp;NEWUID=1043320248/3604<br>
S:&nbsp;*&nbsp;EXPUNGE&nbsp;3-5&nbsp;8<br>
S:&nbsp;+OK&nbsp;Messages&nbsp;copied</P
></P
><P
>The <TT
CLASS="LITERAL"
>MOVE</TT
> command is like <TT
CLASS="LITERAL"
>COPY</TT
> except
that the messages are moved to the folder, instead of copied.
Or, to put it another way, the messages are automatically removed from the
current folder after they are copied.</P
><P
>The server also responds with <SPAN
CLASS="QUOTE"
>"<TT
CLASS="LITERAL"
>* COPY</TT
>"</SPAN
>
that indicates messages that were copied to the destination folder; the
subsequent <SPAN
CLASS="QUOTE"
>"<TT
CLASS="LITERAL"
>* EXPUNGE</TT
>"</SPAN
> messages indicate
the messages were removed from the original folder.</P
><DIV
CLASS="NOTE"
><P
></P
><TABLE
CLASS="NOTE"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
>NOTE:</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>The server's response to <TT
CLASS="LITERAL"
>COPY</TT
> or <TT
CLASS="LITERAL"
>MOVE</TT
>
may include additional
<SPAN
CLASS="QUOTE"
>"<TT
CLASS="LITERAL"
>* EXPUNGE</TT
>"</SPAN
>,
<SPAN
CLASS="QUOTE"
>"<TT
CLASS="LITERAL"
>* EXISTS</TT
>"</SPAN
>,
and <SPAN
CLASS="QUOTE"
>"<TT
CLASS="LITERAL"
>* FETCH</TT
>"</SPAN
> messages reflecting changes
to the folder's contents by other applications that have the same folder
opened.</P
><P
>Servers may, but are not required to, notify of other changes to the
folder's contents as part of the response to <TT
CLASS="LITERAL"
>COPY</TT
> and
<TT
CLASS="LITERAL"
>MOVE</TT
>.</P
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="NOTE"
><P
></P
><TABLE
CLASS="NOTE"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
>NOTE:</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>Servers have several choices for handling requests to copy a message that
were removed by another application.
A server may handle this situation by doing any one of the following:</P
><P
></P
><UL
><LI
><P
>Respond with an <SPAN
CLASS="QUOTE"
>"<TT
CLASS="LITERAL"
>-ERR</TT
>"</SPAN
> and do nothing.</P
></LI
><LI
><P
>Copy some or all remaining messages, then report an
<SPAN
CLASS="QUOTE"
>"<TT
CLASS="LITERAL"
>-ERR</TT
>"</SPAN
>.</P
></LI
><LI
><P
>Copy all remaining messages, as if the nonexistent messages were not
specified at all by the client's
<TT
CLASS="LITERAL"
>MOVE</TT
> or
<TT
CLASS="LITERAL"
>COPY</TT
>.</P
></LI
></UL
><P
>In all cases the server's response must reflect which messages, if any,
were actually copied.
It is the user's responsibility to avoid running multiple applications that
issue conflicting SMAP requests.</P
></TD
></TR
></TABLE
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="add.html"
ACCESSKEY="P"
>&#60;&#60;&#60; Previous</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="book.html"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="search.html"
ACCESSKEY="N"
>Next &#62;&#62;&#62;</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Adding messages to folders</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="smap1.html"
ACCESSKEY="U"
>Up</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Searching messages</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>