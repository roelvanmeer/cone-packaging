<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/loose.dtd">
<HTML
><HEAD
><link rel='stylesheet' type='text/css' href='manpage.css'>
<!-- $Id: book.sgml,v 1.3 2004/05/30 02:43:00 mrsam Exp $ -->
<!-- Copyright 2002-2003 Double Precision, Inc.  See COPYING for -->
<!-- distribution information. -->
<meta name="MSSmartTagsPreventParsing" content="TRUE">
<link rel="icon" href="icon.gif" type="image/gif" />
<TITLE
>mail::account::updateFolderIndexInfo</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.79"><LINK
REL="HOME"
HREF="book.html"><LINK
REL="UP"
TITLE="mail::account Native API reference"
HREF="native.html"><LINK
REL="PREVIOUS"
TITLE="mail::account::updateFolderIndexFlags"
HREF="mail-updatefolderindexflags.html"><LINK
REL="NEXT"
TITLE="mail::account::updateKeywords"
HREF="mail-updatekeywords.html"></HEAD
><BODY
CLASS="REFENTRY"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
></TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="mail-updatefolderindexflags.html"
ACCESSKEY="P"
>&#60;&#60;&#60; Previous</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
></TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="mail-updatekeywords.html"
ACCESSKEY="N"
>Next &#62;&#62;&#62;</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><H1
><A
NAME="MAIL-UPDATEFOLDERINDEXINFO"
></A
>mail::account::updateFolderIndexInfo</H1
><DIV
CLASS="REFNAMEDIV"
><A
NAME="AEN8431"
></A
><H2
>Name</H2
>mail::account::updateFolderIndexInfo&nbsp;--&nbsp;Update status of the currently open folder</DIV
><DIV
CLASS="REFSYNOPSISDIV"
><A
NAME="AEN8434"
></A
><H2
>Synopsis</H2
><P
CLASS="LITERALLAYOUT"
>#include&nbsp;&#60;libmail/mail.H&#62;<br>
<br>
<br>
class&nbsp;myCallback&nbsp;:&nbsp;public&nbsp;mail::callback&nbsp;{<br>
public:<br>
&nbsp;&nbsp;&nbsp;&nbsp;void&nbsp;success(std::string&nbsp;msg);<br>
&nbsp;&nbsp;&nbsp;&nbsp;void&nbsp;fail(std::string&nbsp;msg);<br>
};</P
><P
CLASS="LITERALLAYOUT"
>mail::account&nbsp;*account;</P
><DIV
CLASS="FUNCSYNOPSIS"
><P
></P
><A
NAME="AEN8437"
></A
><P
><CODE
><CODE
CLASS="FUNCDEF"
>account-&#62;<TT
CLASS="FUNCTION"
>updateFolderIndexInfo</TT
></CODE
>(myCallback &#38;<TT
CLASS="PARAMETER"
><I
>callback</I
></TT
>);</CODE
></P
><P
></P
></DIV
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="AEN8443"
></A
><H2
>USAGE</H2
><P
>This function requests that the status of the currently open folder be updated.
Messages marked as deleted are removed.
The application will also be notified about
changes to the folder made by any other
application that has the same folder opened.</P
><P
>This request invokes methods in the currently opened folder's
<CODE
CLASS="STRUCTNAME"
>mail::callback::folder</CODE
> object, as follows:</P
><P
></P
><UL
><LI
><P
>The <TT
CLASS="FUNCTION"
>mail::account::messageChanged</TT
> method is invoked for
all messages which have an updated status flag set.</P
></LI
><LI
><P
><TT
CLASS="FUNCTION"
>mail::account::messagesRemoved</TT
> is invoked for all
messages removed from the folder (those that were marked as deleted by this
application and those that were removed from the folder by any other
application that has this folder opened).</P
></LI
><LI
><P
><TT
CLASS="FUNCTION"
>mail::account::newMessages</TT
> is invoked if any messages
were added to this folder.
The application should use
<A
HREF="mail-getfolderindexsize.html"
><SPAN
CLASS="CITEREFENTRY"
><SPAN
CLASS="REFENTRYTITLE"
>mail::account::getFolderIndexSize</SPAN
>(3x)</SPAN
></A
>,
and compare it to the previously-known folder size, in order to determine
how many messages were added to the folder (new messages are always added to
the end of the message list).</P
></LI
></UL
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="AEN8462"
></A
><H2
>Return Codes</H2
><P
>The application must wait until
<TT
CLASS="PARAMETER"
><I
>callback</I
></TT
>'s
<TT
CLASS="FUNCTION"
>success</TT
> or
<TT
CLASS="FUNCTION"
>fail</TT
> method is invoked.
The <TT
CLASS="FUNCTION"
>success</TT
> method is invoked when this request is
succesfully processed.
The <TT
CLASS="FUNCTION"
>fail</TT
> method is invoked if this request cannot
be processed.
The application must not destroy
<TT
CLASS="PARAMETER"
><I
>callback</I
></TT
> until either the
<TT
CLASS="FUNCTION"
>success</TT
> or
<TT
CLASS="FUNCTION"
>fail</TT
> method is invoked.</P
><DIV
CLASS="NOTE"
><P
></P
><TABLE
CLASS="NOTE"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
>NOTE:</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
><TT
CLASS="PARAMETER"
><I
>callback</I
></TT
>'s
<TT
CLASS="FUNCTION"
>fail</TT
> method may be invoked even after other
callback methods were invoked.
This indicates that the request was partially completed before the error
was encountered.</P
></TD
></TR
></TABLE
></DIV
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="AEN8477"
></A
><H2
>SEE ALSO</H2
><P
><A
HREF="mail-savefolderindexinfo.html"
><SPAN
CLASS="CITEREFENTRY"
><SPAN
CLASS="REFENTRYTITLE"
>mail::account::saveFolderIndexInfo</SPAN
>(3x)</SPAN
></A
>,
<A
HREF="mail-getfolderindexinfo.html"
><SPAN
CLASS="CITEREFENTRY"
><SPAN
CLASS="REFENTRYTITLE"
>mail::account::getFolderIndexInfo</SPAN
>(3x)</SPAN
></A
>,
<A
HREF="mail-updatenotify.html"
><SPAN
CLASS="CITEREFENTRY"
><SPAN
CLASS="REFENTRYTITLE"
>mail::account::updateNotify</SPAN
>(3x)</SPAN
></A
>.</P
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="mail-updatefolderindexflags.html"
ACCESSKEY="P"
>&#60;&#60;&#60; Previous</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="book.html"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="mail-updatekeywords.html"
ACCESSKEY="N"
>Next &#62;&#62;&#62;</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>mail::account::updateFolderIndexFlags</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="native.html"
ACCESSKEY="U"
>Up</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>mail::account::updateKeywords</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>